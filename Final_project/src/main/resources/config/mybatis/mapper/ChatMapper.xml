<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="three.chat.mapper.ChatMapper">
	<select id="findRoomCheck" resultType="ChatRoom" parameterType="ChatRoom">
		select * from croomlist where usernum1=#{userNum1} and usernum2=#{userNum2} or 
		usernum1=#{userNum2} and usernum2=#{userNum1}
	</select>

	<insert id="creatRoom" parameterType="ChatRoom">
		<selectKey keyProperty="roomid"  resultType="int" order="BEFORE">
			select croomlist_seq.nextval from dual
		</selectKey>
		insert into croomlist values (#{roomid},#{userNum1},#{userNum2}) 
	</insert>
	
	<select id="myChatRoomList" parameterType="ChatRoom" resultType="ChatRoom">
		select * from croomList where usernum1=#{userNum1} or usernum2=#{userNum1}  
	</select>
	
	<delete id="exitChat" parameterType="ChatRoom">
		delete from croomList where roomid=#{roomid}
	</delete>
</mapper>