<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="three.donation.mapper.DonationMapper">
	
	<!-- 전체 기부 금액 -->
	<select id="totalDonation" resultType="Integer">
		select sum(donAmount)
		totalDonate from donation
	</select>
	
	<!-- 전체 기부 건수 -->
	<select id="totalDonateCount" resultType="Integer">
		select count(donNum)
		from donation
	</select>
	
	<!-- 기부자 목록(기부금액 높은 순으로 금액, 아이디 출력) -->
	<select id="userListDonate" resultType="java.util.LinkedHashMap">
		select row_number()
		over(order by sum(donAmount) desc) rankingNumber,sum(donAmount) totalAmount,
		userNum_fk from donation group by userNum_fk
	</select>
	
	<!-- 기부자 순위 검색 -->
	<select id="donationRangkingId" resultType="Integer">
		select sum(donAmount) totalAmount 
		from donation <!-- where userNum_fk=#{userId} -->
	</select>
	
	<!-- 기부 단체 설명 -->
	<select id="donationOrgInfo" resultType="String">
		select donOrgInfo from
		donationOrg where donOrgNum=2002
	</select>

</mapper>